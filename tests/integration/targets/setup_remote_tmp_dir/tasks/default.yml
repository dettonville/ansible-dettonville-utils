- name: create temporary directory
  tempfile:
    state: directory
    suffix: .test
  register: remote_tmp_dir_result
  notify:
    - delete temporary directory

- name: record temporary directory
  set_fact:
    remote_tmp_dir: "{{ remote_tmp_dir_result.path }}"
